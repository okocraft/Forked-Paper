From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Siroshun09 <siro.shun8@gmail.com>
Date: Sun, 23 Jul 2023 06:13:19 +0900
Subject: [PATCH] Workaround for CME

java.util.ConcurrentModificationException: null
    at java.util.HashMap.computeIfAbsent(HashMap.java:1221) ~[?:?]
    at org.bukkit.craftbukkit.v1_20_R1.block.data.CraftBlockData.toBukkit(CraftBlockData.java:168) ~[okocraft-1.20.1.jar:git-Folia-"ff9deb2"]

diff --git a/src/main/java/org/bukkit/craftbukkit/block/data/CraftBlockData.java b/src/main/java/org/bukkit/craftbukkit/block/data/CraftBlockData.java
index 0bf863f597f3657a0f158756a2a91bda7eb453f6..50c5970a65b70e60a8e7021df16cedd5b9474bfb 100644
--- a/src/main/java/org/bukkit/craftbukkit/block/data/CraftBlockData.java
+++ b/src/main/java/org/bukkit/craftbukkit/block/data/CraftBlockData.java
@@ -152,7 +152,7 @@ public class CraftBlockData implements BlockData {
         return exactMatch;
     }
 
-    private static final Map<Class<? extends Enum<?>>, Enum<?>[]> ENUM_VALUES = new HashMap<>();
+    private static final Map<Class<? extends Enum<?>>, Enum<?>[]> ENUM_VALUES = new java.util.concurrent.ConcurrentHashMap<>(); // okocraft - workaround for CME
 
     /**
      * Convert an NMS Enum (usually a BlockStateEnum) to its appropriate Bukkit
