From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Siroshun09 <siro.shun8@gmail.com>
Date: Tue, 18 Jul 2023 06:20:25 +0900
Subject: [PATCH] Call PlayerSpawnLocationEvent that cannot modify spawn
 location


diff --git a/src/main/java/net/minecraft/server/players/PlayerList.java b/src/main/java/net/minecraft/server/players/PlayerList.java
index ffb5332310e9b2d10292fe01c37fd48552fedffc..e60a3cc7c0e54f9f21ce196432b415d907dc7235 100644
--- a/src/main/java/net/minecraft/server/players/PlayerList.java
+++ b/src/main/java/net/minecraft/server/players/PlayerList.java
@@ -303,6 +303,9 @@ public abstract class PlayerList {
             worldserver1 = worldserver;
         }
 
+        // okocraft start - Call PlayerSpawnLocationEvent that cannot modify spawn location
+        this.cserver.getPluginManager().callEvent(new org.spigotmc.event.player.PlayerSpawnLocationEvent(player.getBukkitEntity(), worldserver1.getWorld().getSpawnLocation()));
+        // okocraft end
         // Paper start
         if (nbttagcompound == null) {
             player.spawnReason = org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason.DEFAULT; // set Player SpawnReason to DEFAULT on first login
