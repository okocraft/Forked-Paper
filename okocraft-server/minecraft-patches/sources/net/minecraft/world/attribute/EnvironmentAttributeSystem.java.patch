--- a/net/minecraft/world/attribute/EnvironmentAttributeSystem.java
+++ b/net/minecraft/world/attribute/EnvironmentAttributeSystem.java
@@ -62,7 +_,12 @@
     static void addDefaultLayers(EnvironmentAttributeSystem.Builder builder, Level level) {
         RegistryAccess registryAccess = level.registryAccess();
         BiomeManager biomeManager = level.getBiomeManager();
-        LongSupplier longSupplier = level::getDayTime;
+        // okocraft start - region threading
+        LongSupplier longSupplier = () -> {
+            final io.papermc.paper.threadedregions.RegionizedWorldData cur = io.papermc.paper.threadedregions.TickRegionScheduler.getCurrentRegionizedWorldData();
+            return cur.world == level ? cur.getTickData().dayTime() : level.getLevelData().getDayTime();
+        };
+        // okocraft end - region threading
         addDimensionLayer(builder, level.dimensionType());
         addBiomeLayer(builder, registryAccess.lookupOrThrow(Registries.BIOME), biomeManager);
         level.dimensionType().timelines().forEach(holder -> builder.addTimelineLayer((Holder<Timeline>)holder, longSupplier));
